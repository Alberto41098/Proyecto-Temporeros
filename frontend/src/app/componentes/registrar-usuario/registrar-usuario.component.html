<div class="todo-registrar-temporero">
    <div class="form" *ngIf="!loading">
        <div class="div-form">
          <div class="card-header">
            <h3 class="mb-0">Crear cuenta</h3>
          </div>
          <form [formGroup]="form" (submit)="submit()">
            <div class="form-row">
                <div class="form-group col-md-5">
                  <label for="nombre">Nombre</label>
                  <input formControlName="nombre" type="text" class="form-control paramatro" id="form-nombre" aria-describedby="nombre"
                    placeholder="" autocomplete="off">
                    <div class="form-text text-muted">
                      <div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="error">
                        <small *ngIf="nombre.errors.required">El nombre es obligatorio.</small>
                      </div>
                    </div>
                </div>
                <div class="form-group col-md-7">
                  <label for="apellidos">Apellidos</label>
                  <input formControlName="apellidos" type="text" class="form-control paramatro" id="form-apellidos" aria-describedby="apellidos"
                    placeholder="" autocomplete="off">
                    <div class="form-text text-muted">
                      <div *ngIf="apellidos.invalid && (apellidos.dirty || apellidos.touched)" class="error">
                        <small *ngIf="apellidos.errors.required">Los apellidos son obligatorio.</small>
                      </div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-8">
                  <label for="email">Email</label>
                  <input formControlName="email" type="email" class="form-control paramatro" id="form-email" placeholder=""
                    autocomplete="off" aria-describedby="email" (keyup)="checkEmail()">
                    <div class="form-text text-muted">
                      <div *ngIf="email.valid && errorMail" class="error">
                        <small>Ya existe este email</small>
                      </div>
                      <div *ngIf="email.invalid && (email.dirty || email.touched)" class="error">
                        <small *ngIf="email.errors.required">El email es obligatorio.</small>
                        <small *ngIf="email.errors.pattern">El formato de email no es correcto.</small>
                      </div>
                    </div>
                </div>
                <div class="form-group col-md-4">
                  <label for="password">Contraseña</label>
                  <input formControlName="password" type="password" class="form-control paramatro" id="form-pass"
                    placeholder="" autocomplete="off" aria-describedby="password">
                  <div class="form-text text-muted">
                    <div *ngIf="password.invalid && (password.dirty || password.touched)" class="error">
                      <small *ngIf="password.errors.required">La contraseña es obligatorio.</small>
                      <small *ngIf="password.errors.minlength">La longitud mínima es de 8 caracteres. </small>
                    </div>
                  </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="tlf">Teléfono</label>
                    <input formControlName="telefono" type="tel" class="form-control paramatro" id="form-tlf" placeholder=""
                      autocomplete="off" aria-describedby="tlf">
                      <div class="form-text text-muted">
                        <div *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)" class="error">
                          <small *ngIf="telefono.errors.required">El telefono es obligatorio.</small>
                          <small *ngIf="telefono.errors.pattern">Formato de teléfono incorrecto.</small>
                        </div>
                      </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="dni">DNI</label>
                  <input formControlName="DNI" type="text" class="form-control paramatro" id="form-dni" placeholder="" autocomplete="off"
                    aria-describedby="dni" (keyup)="checkDNI()">
                    <div class="form-text text-muted">
                      <div *ngIf="DNI.valid && errorDNI" class="error">
                        <small>Ya existe este DNI</small>
                      </div>
                      <div *ngIf="DNI.invalid && (DNI.dirty || DNI.touched)" class="error">
                        <small *ngIf="DNI.errors.required">El DNI es obligatorio.</small>
                        <small *ngIf="DNI.errors.pattern">Formato de DNI incorrecto.</small>
                      </div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="prov">Provincia</label>
                  <select formControlName="provincia_id" class="custom-select paramatro-sel" id="provincia"
                    (change)="changeMunicipio()">
                    <option selected value="0">Seleccione Provincia</option>
                    <option *ngFor="let prov of provincias" value="{{prov.id}}">
                      {{prov.provincia}}</option>
                  </select>
                </div>
                <div class="form-group col-md-6">
                  <label for="mun">Municipio</label>
                  <select formControlName="municipio_id" class="custom-select paramatro-sel" id="municipio">
                    <option selected value="0">Seleccione Municipio</option>
                    <option *ngFor="let muni of municipios" value="{{muni.id}}">
                      {{muni.municipio}}</option>
                  </select>
                </div>
            </div>
            <div class="card-footer" id="footer">
              <div class="boton">
                <button type="submit" class="btn btn-primary col-md-12" [disabled]="form.invalid || error">¡Listo!</button>
              </div>
            </div>
          </form>
        </div>
    </div>
    <app-loading *ngIf="loading"></app-loading>
</div>